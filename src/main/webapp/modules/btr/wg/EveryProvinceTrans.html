<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <link rel="stylesheet" type="text/css" href="../../dm/common.css">
    <script type="text/javascript" src="../../framework/core.js"></script>
    <script type="text/javascript" src="../../framework/ajax.js"></script>
    <script  src="../../dm/common.js"></script>
    <title>各省货量地图</title>
 
    <script src="../../tools/echarts-2.0.4/echarts-plain-map.js"></script>

    <script type="text/javascript">

    window.onload = function() {
        var globalValiable = window.parent.globalValiable;
        var sub;
        if(globalValiable && globalValiable.data) {
            queryParams = globalValiable.queryParams;
            title = queryParams.param1;
            if(queryParams.param1==queryParams.param2){
                sub = queryParams.param1;
            }
            else{
                sub = queryParams.param1+'至'+queryParams.param2;
            }
            show(globalValiable.data,sub);
            return;
        }
    } 


    function show(originData,subtitle) {
        var maxdata=0;
        var data={};
        data=[];

        for(var i = 0; i < originData.length; i++) {
            data.push({name: originData[i]["省份"],value: originData[i]["业务量"]});

            if(originData[i]["业务量"]>maxdata){
                maxdata = originData[i]["业务量"];
            }        
        }

		var myChart = echarts.init(document.getElementById('main'));
 
        var option = {
    title : {
        text: '全网货量地图',
        textStyle:{fontSize:'24',fontFamily:'Microsoft YaHei'},
        subtext: subtitle,
        subtextStyle:{fontSize:'18',color: '#999999',fontFamily:'Microsoft YaHei'},
        x:'center'
    },
    tooltip : {
        trigger: 'item'
    },
    dataRange: {
        min: 0,
        max: maxdata,
        x: 'left',
        y: 'bottom',
        text:['最高','0'],           // 文本，默认为数值文本
        calculable : true,
        //color:['orangered','yellow','lightskyblue']
    },
    toolbox: {
        show: true,
        orient : 'vertical',
        x: 'right',
        y: 'center',
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    roamController: {
        show: true,
        x: 'right',
        mapTypeControl: {
            'china': true
        }
    },
    series : [
        {
            name:'业务量',
            type: 'map',
            mapType: 'china',
            roam: false,
            itemStyle:{
                normal:{label:{show:true}},
                emphasis:{label:{show:true}}
            },
            data:data
        }
    ]
};              
        myChart.setOption(option);
	}
    </script> 
    
</head>

<body>
    <div id="main" style="height:660px;border:1px solid #ccc;padding:10px;"></div>
</body>
</html>